---
import { HeaderLinks, SITE_TITLE } from "@consts";
import Link from "@components/Links.astro";
const isArticle = /^\/posts\/[\w-]+\/$/.test(Astro.url.pathname);
---

<header class="z-50 flex w-full flex-wrap py-7 md:flex-nowrap md:justify-start">
  <nav
    class="relative mx-auto flex w-full max-w-7xl basis-full flex-wrap items-center px-4 md:flex"
    aria-label="Global"
  >
    <div class="md:flex-1">
      {
        (() => {
          if (isArticle) {
            return (
              <a
                class="flex-none text-xl font-semibold text-neutral-900 hover:text-neutral-600 dark:text-neutral-400 dark:hover:text-neutral-200"
                href="/"
              >
                {SITE_TITLE}
              </a>
            );
          }
          return (
            <h1>
              <a
                class="flex-none text-xl font-semibold text-neutral-900 hover:text-neutral-600 dark:text-neutral-400 dark:hover:text-neutral-200"
                href="/"
              >
                {SITE_TITLE}
              </a>
            </h1>
          );
        })()
      }
    </div>

    <div
      class="ms-auto flex flex-none items-center gap-x-2 py-1 md:order-3 md:ps-6"
    >
      <button
        type="button"
        class="inline-flex items-center gap-x-2 rounded-xl border border-transparent px-3 py-2 text-sm font-medium text-black transition hover:bg-neutral-100 disabled:pointer-events-none disabled:opacity-50 dark:text-gray-300 dark:hover:bg-neutral-700"
        onclick="window.location.href='/search/'"
        aria-label="検索"
      >
        <span class="icon-base iconify tabler--search"></span>
      </button>

      <button
        type="button"
        class="hs-dark-mode inline-flex items-center gap-x-2 rounded-full px-3 py-2 text-sm text-black hover:bg-white/20 hs-dark-mode-active:hidden"
        data-hs-theme-click-value="dark"
        aria-label="ライトモードにする"
      >
        <span class="icon-base iconify tabler--sun-filled"></span>
      </button>
      <button
        type="button"
        class="hs-dark-mode hidden items-center gap-x-2 rounded-full px-3 py-2 text-sm text-white hover:bg-white/20 hs-dark-mode-active:inline-flex"
        data-hs-theme-click-value="light"
        aria-label="ダークモードにする"
      >
        <span class="icon-base iconify tabler--moon-filled"></span>
      </button>

      <div class="md:hidden">
        <button
          type="button"
          class="hs-collapse-toggle flex size-[38px] items-center justify-center rounded-xl text-sm font-semibold text-black hover:bg-neutral-100 disabled:pointer-events-none disabled:opacity-50 dark:text-gray-300 dark:hover:bg-neutral-700"
          data-hs-collapse="#navbar-collapse-with-animation"
          aria-controls="navbar-collapse-with-animation"
          aria-label="Toggle navigation"
        >
          <span
            class="iconify size-4 flex-shrink-0 tabler--menu-2 hs-collapse-open:hidden"
          ></span>
          <span class="iconify tabler--menu-order"></span>
        </button>
      </div>
    </div>

    <div
      id="navbar-collapse-with-animation"
      class="hs-collapse hidden grow basis-full overflow-hidden transition-all duration-300 md:order-2 md:block md:w-auto md:flex-1 md:basis-auto"
    >
      <div
        class="mt-5 flex flex-col gap-x-0 gap-y-4 md:mt-0 md:flex-row md:items-center md:justify-center md:gap-x-7 md:gap-y-0"
      >
        {
          HeaderLinks.map((link) => (
            <Link
              href={link.href}
              class="px-4 py-3 font-medium text-neutral-900 hover:text-neutral-600 dark:text-neutral-400 dark:hover:text-neutral-200"
            >
              {link.title}
            </Link>
          ))
        }
      </div>
    </div>
  </nav>
</header>
